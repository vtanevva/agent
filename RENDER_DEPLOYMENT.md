# Render Deployment Guide for Mental Health Chatbot

## Prerequisites
1. GitHub account with your code pushed
2. Render account (free)
3. MongoDB Atlas account (free tier available)

## Step 1: Set Up MongoDB Atlas

1. Go to [MongoDB Atlas](https://www.mongodb.com/atlas)
2. Create free account and cluster
3. Create database user with read/write permissions
4. Get connection string
5. Whitelist Render's IP addresses (0.0.0.0/0 for development)

## Step 2: Deploy on Render

### Option A: Using render.yaml (Recommended)
1. Push your code to GitHub (including the `render.yaml` file)
2. Go to [Render Dashboard](https://dashboard.render.com/)
3. Click "New +" → "Blueprint"
4. Connect your GitHub repository
5. Render will automatically detect the `render.yaml` and create services
6. Set environment variables (see below)

### Option B: Manual Setup
1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click "New +" → "Web Service"
3. Connect your GitHub repository
4. Configure:
   - **Name**: `mental-health-chatbot`
   - **Environment**: `Python 3`
   - **Build Command**: 
     ```bash
     cd my-chatbot && npm install && npm run build
     cd .. && pip install -r requirements-render.txt
     ```
   - **Start Command**: 
     ```bash
     gunicorn server:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120
     ```

## Step 3: Environment Variables

Set these in Render dashboard:

| Key | Value | Description |
|-----|-------|-------------|
| `MONGO_URI` | `mongodb+srv://...` | MongoDB connection string |
| `FLASK_SECRET_KEY` | `generated-value` | Auto-generated by Render |
| `OPENAI_API_KEY` | `sk-...` | Your OpenAI API key |
| `GOOGLE_SECRET_FILE` | `google_client_secret.json` | Google OAuth file |
| `IG_APP_ID` | `your-app-id` | Instagram app ID |
| `IG_APP_SECRET` | `your-app-secret` | Instagram app secret |

## Step 4: Upload Google OAuth File

1. In Render dashboard, go to your service
2. Click "Files" tab
3. Upload `google_client_secret.json`

## Step 5: Test Deployment

1. Wait for build to complete (5-10 minutes)
2. Visit your app URL (e.g., `https://mental-health-chatbot.onrender.com`)
3. Test the health endpoint: `/health`

## Troubleshooting

### Common Issues:
1. **Build fails**: Check build logs for dependency issues
2. **App crashes**: Check logs for memory/CPU limits
3. **Database connection**: Verify MongoDB URI and IP whitelist
4. **OAuth errors**: Ensure Google OAuth file is uploaded

### Resource Limits (Free Tier):
- **Build time**: 15 minutes max
- **Memory**: 512MB RAM
- **CPU**: Shared
- **Sleep after**: 15 minutes of inactivity

## Cost
- **Free tier**: $0/month
- **Upgrade**: $7/month for always-on service

## Next Steps
1. Test all features thoroughly
2. Set up custom domain (optional)
3. Configure monitoring and alerts
4. Set up CI/CD for automatic deployments
